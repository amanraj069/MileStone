<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apply for Job - Milestone</title>
    <link rel="stylesheet" href="/css/Joblisting/jobs_apply.css" />
    <link rel="stylesheet" href="/css/Joblisting/Job_listing_public.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/home/home.css" />
  </head>

  <body class="light-mode">
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <a href="/" style="font-size: 40px">Mile<span>stone</span></a>
          </div>
          <div class="header-actions">
            <button
              class="theme-toggle"
              id="theme-toggle"
              aria-label="Toggle dark mode"
            >
                <path
                  d="M12 17.5C15.0376 17.5 17.5 15.0376 17.5 12C17.5 8.96243 15.0376 6.5 12 6.5C8.96243 6.5 6.5 8.96243 6.5 12C6.5 15.0376 8.96243 17.5 12 17.5Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                />
              </svg>
              <svg
                class="theme-icon moon-icon"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21.0672 11.8568L20.4253 11.469L21.0672 11.8568ZM12.1432 2.93276L11.7553 2.29085V2.29085L12.1432 2.93276ZM21.25 12C21.25 17.1086 17.1086 21.25 12 21.25V22.75C17.9371 22.75 22.75 17.9371 22.75 12H21.25ZM12 21.25C6.89137 21.25 2.75 17.1086 2.75 12H1.25C1.25 17.9371 6.06294 22.75 12 22.75V21.25ZM2.75 12C2.75 6.89137 6.89137 2.75 12 2.75V1.25C6.06294 1.25 1.25 6.06294 1.25 12H2.75ZM15.5 14.25C12.3244 14.25 9.75 11.6756 9.75 8.5H8.25C8.25 12.5041 11.4959 15.75 15.5 15.75V14.25ZM20.4253 11.469C19.4172 13.1373 17.5882 14.25 15.5 14.25V15.75C18.1349 15.75 20.4407 14.3439 21.7092 12.2447L20.4253 11.469ZM9.75 8.5C9.75 6.41177 10.8627 4.58282 12.531 3.57467L11.7553 2.29085C9.65609 3.5593 8.25 5.86509 8.25 8.5H9.75ZM12 2.75C11.9115 2.75 11.8077 2.71008 11.7324 2.63168C11.6686 2.56527 11.6538 2.50244 11.6503 2.47703C11.6461 2.44587 11.6482 2.35557 11.7553 2.29085L12.531 3.57467C13.0342 3.27065 13.196 2.71398 13.1368 2.27042C13.0754 1.81618 12.7166 1.25 12 1.25V2.75ZM21.7092 12.2447C21.6445 12.3518 21.5541 12.3539 21.523 12.3497C21.4976 12.3462 21.4347 12.3314 21.3683 12.2676C21.2899 12.1923 21.25 12.0885 21.25 12H22.75C22.75 11.2834 22.1838 10.9246 21.7296 10.8632C21.286 10.804 20.7294 10.9658 20.4253 11.469L21.7092 12.2447Z"
                  fill="currentColor"
                />
              </svg>
            </button>

            <% if (typeof user !== 'undefined' && user) { %>
            <a href="<%= dashboardRoute %>" class="btn btn-primary">
              <i class="fas fa-tv" id="icon_spacing"></i>Dashboard
            </a>
            <% } else { %>
            <a href="/login" class="btn btn-primary">
              <i class="fas fa-sign-in-alt" id="icon_spacing"></i>Sign In
            </a>
            <% } %>

            <button
              class="mobile-menu-toggle"
              id="mobile-menu-toggle"
              aria-label="Toggle menu"
            >
              <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <h1 class="page-title">Apply for <%= job.title %></h1>

      <!-- Error Message -->
      <% if (error) { %>
      <div class="error-message">
        <p><%= error %></p>
      </div>
      <% } %>

      <!-- Content Wrapper for Side-by-Side Layout -->
      <div class="content-wrapper">
        <!-- Job Details Section -->
        <div class="job-details">
          <h2 class="section-title">Job Details</h2>
          <div class="job-details-grid">
            <div class="job-details-column">
              <p><strong>Job Type:</strong> <%= job.jobType %></p>
              <p>
                <strong>Location:</strong> <%= job.location || 'Not specified'
                %>
              </p>
              <p>
                <strong>Experience Level:</strong> <%= job.experienceLevel %>
              </p>
              <p>
                <strong>Budget:</strong> Rs. <%= job.budget.amount %> / <%=
                job.budget.period %>
              </p>
            </div>
            <div class="job-details-column">
              <p>
                <strong>Posted:</strong> <%= job.postedDate.toDateString() %>
              </p>
              <p>
                <strong>Deadline:</strong> <%=
                job.applicationDeadline.toDateString() %>
              </p>
              <p><strong>Remote:</strong> <%= job.remote ? 'Yes' : 'No' %></p>
            </div>
          </div>

          <div class="job-requirements">
            <h3 class="sub-section-title">Requirements</h3>
            <ul class="list">
              <% job.description.requirements.forEach(req => { %>
              <li><%= req %></li>
              <% }) %>
            </ul>
          </div>

          <div class="job-skills">
            <h3 class="sub-section-title">Skills</h3>
            <ul class="list">
              <% job.description.skills.forEach(skill => { %>
              <li><%= skill %></li>
              <% }) %>
            </ul>
          </div>
        </div>

        <!-- Application Form -->
        <% if (user && user.role === 'Freelancer') { %>
        <div class="application-form">
          <h2 class="section-title">Application Form</h2>

          <form action="/jobs/apply/<%= job.jobId %>" method="POST">
            <div class="form-group">
              <label for="coverMessage" class="form-label">Cover Message</label>
              <textarea
                id="coverMessage"
                name="coverMessage"
                rows="5"
                class="form-textarea"
                required
              ></textarea>
            </div>

            <div class="form-group">
              <label for="resumeLink" class="form-label">Resume Link</label>
              <input
                type="url"
                id="resumeLink"
                name="resumeLink"
                class="form-input"
                placeholder="https://example.com/resume.pdf"
                required
              />
            </div>

            <input type="hidden" name="jobId" value="<%= job.jobId %>" />
            <input
              type="hidden"
              name="freelancerId"
              value="<%= user.roleId %>"
            />

            <button type="submit" class="submit-button">
              Submit Application
            </button>
          </form>
        </div>
        <% } else { %>
        <div class="application-form">
          <div class="warning-message">
            <p>You must be logged in as a Freelancer to apply for this job.</p>
          </div>
        </div>
        <% } %>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer" id="footer">
        <div class="container">
            <div class="footer-top">
                <div class="footer-about">
                    <div class="logo">
                        <a href="/">Mile<span>stone</span></a>
                    </div>
                    <p>Your go-to platform for hiring top freelancers and finding exciting projects. Connect,
                        collaborate, and create with the best talent worldwide.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <div class="footer-links-column">
                        <h3>Quick Links</h3>
                        <ul>
                            <li><a href="/">Home</a></li>
                            <li><a href="/jobs">Find Jobs</a></li>
                            <li><a href="/freelancers">Hire Freelancers</a></li>
                            <li><a href="/pricing">Pricing</a></li>
                        </ul>
                    </div>
                    <div class="footer-links-column">
                        <h3>For Freelancers</h3>
                        <ul>
                            <li><a href="/find-work">Find Work</a></li>
                            <li><a href="/create-profile">Create Profile</a></li>
                            <li><a href="/freelancer-resources">Resources</a></li>
                            <li><a href="/community">Community</a></li>
                        </ul>
                    </div>
                    <div class="footer-links-column">
                        <h3>For Clients</h3>
                        <ul>
                            <li><a href="#">Post a Job</a></li>
                            <li><a href="/find-freelancers">Find Freelancers</a></li>
                            <li><a href="/enterprise">Enterprise Solutions</a></li>
                            <li><a href="/success-stories">Success Stories</a></li>
                        </ul>
                    </div>
                    <div class="footer-links-column">
                        <h3>Resources</h3>
                        <ul>
                            <li><a href="/blog">Blog</a></li>
                            <li><a href="/guides">Guides</a></li>
                            <li><a href="/help">Help Center</a></li>
                            <li><a href="javascript:void(0);" onclick="openContactModal()">Contact Us</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2023 Milestone. All rights reserved.</p>
                <div class="footer-legal">
                    <a href="/terms">Terms of Service</a>
                    <a href="/privacy">Privacy Policy</a>
                    <a href="/cookies">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>
  </body>
</html>
